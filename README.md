<div align="center">
<h1>lunacopy.sh ðŸŒ™</h1>

<p>Linux file integrity testing automation script</p>
</div>

---

An open-source Linux bash script alternative to a popular Redmond/Gates and Cupertino/Fruit closed-source file hash utility, which is used to replace file explorer copy operations. LunaCopy focuses solely on the file hashing aspect and introduces new features to make it easier to manage hash list testfiles.

See the [Man Page](#man-page) further down this page for details.

Similar Tools
-------------

Checksums stored in extended attributes for each file
* https://github.com/maugier/shatag
* https://github.com/rfjakob/cshatag

Checksums stored in a single central database
* https://github.com/ambv/bitrot
* https://sourceforge.net/p/yabitrot/code/ci/master/tree/

Checksums stored in one database per directory
* https://github.com/laktak/chkbit-py

Project Goals
----------------
### Stability
* Leverage built-in Linux software for reliability and accuracy (md5sum, sha256sum).
### Openness
* Ability to import existing closed-source format testfiles and save them in an open format.
* Standardize formats and processes with user operation in mind.
* Avoid using specialized databases.
* Avoid storing file hash information in extended file attributes to enable compatibility across different file systems.
### Ease of use
* Avoid using Python to simplify troubleshooting and installation. 
* Append testfiles with new files without re-hashing existing files.

Solving File Integrity on Linux
-------------
LunaCopy can hash and verify thousands of files for checksum integrity by writing and checking text files. LunaCopy's functionality is too vast for a single line of bash script but is not complex to warrant a rewrite as a command line utility. 

**Summary of File Integrity Testing and Resolution**

When testing the integrity of files using hashing, it's essential to follow an established guideline based on technical principles of underlying technology, for example:

1. **System Check**: 
    - Before testing files, ensure that the hardware is in optimal condition.
    - Verify storage condition using SMART "long" test, HD Sentinel surface test, or similar tools. 
    - Test RAM with memtest86.
    - If available, check CPU with manufacturer software. 
    - As an IT expert, determine your criteria for a "fully functional, trusted" system.

2. **File Verification**: 
    - Ensure files to be tested aren't already corrupt. 
    - Be wary of old files from outdated devices, partial downloads, or files from unchecked systems. 
    - Tools like "czkawka" can help detect corrupt image files. 
    - Remember, file recovery is a different subject.

3. **Hash Testing**: 
    - Once confident in your files' quality, use a script or a utility to record their hash all at once.
    - Hashes are binary: they either match or they don't. 
    - If a file fails its hash test, it means the file has been altered. Reasons could range from magnetic effects on HDDs, electrical issues on SSDs, or even external factors like solar radiation on RAM. Outside of external factors, file modification may happen both intentionally and unintentionally by both people and software.
    - Investigate any changes in files and check for updates, movements, or modifications by other software. 
    - If the file has no logical reason for change, deem it corrupted. Restore from backup or try to repair.

By following an approach similar to this one, IT professionals can mitigate potential damages from corrupted data.

Flow Chart
--------
![Flow Chart](https://raw.githubusercontent.com/artem-r-d/lunacopy/main/flowchart.png)

Man Page
--------

```
LUNACOPY(1)                       User Manual                       LUNACOPY(1)

NAME
       lunacopy

SYNOPSIS
       ./lunacopy.sh [OPTION] [FILE...]

DESCRIPTION
       LunaCopy is an open-source Linux file integrity automation script.

       Testfile LunaCopy format is as follows:
       [lowercase hash]  relativepath/filename.ext

       LunaCopy can import testfiles generated by a popular closed-source tool for Redmond/Gates and Cupertino/Fruit systems.

       LunaCopy was written in 2023.

OPTIONS
       hash    create a new testfile or append new files to an existing testfile
       verify  verifies existing testfile for individual files or folders
       import  converts closed-source testfiles into a LunaCopy format

EXAMPLES
       Single file hashing (file.md5 or file.sha256 is created in the same directory):
       # ./lunacopy.sh hash file.ext

       Folder hashing (folder.md5 or folder.sha256 is created inside the hashed directory):
       # ./lunacopy.sh hash folder/
       
       Single file verification (file.md5 or file.sha256 and file.ext must be in the same directory):
       # ./lunacopy.sh verify file.md5

       Folder verification (folder.md5 or folder.sha256 must be inside the folder/ directory):
       # ./lunacopy.sh verify folder/

       Importing testfiles of another format (original is renamed to folder.md5.backup):
       # ./lunacopy.sh import folder.md5

COMPATIBILITY
       LunaCopy is one-way compatible with testfiles generated by a popular closed-source tool for Redmond/Gates and Cupertino/Fruit systems to facilitate operating and filesystem system migration.

AUTHOR
       Artem D., https://github.com/artem-r-d

COPYRIGHT
       Copyright 2023 Artem D., MIT License.

SEE ALSO
       md5sum(1), sha256sum(1)

Linux                              AUGUST 2023                         LUNACOPY(1)
```
Changelog
---------

*Short changelog - for all the details look at the git log.*

v1.0.0, 2023-08-18
* Initial release
